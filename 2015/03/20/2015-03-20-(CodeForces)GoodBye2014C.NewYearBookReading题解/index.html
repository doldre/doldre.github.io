<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>(CodeForces) Good Bye 2014  C. New Year Book Reading 题解 | Xinchen&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="C. New Year Book Readingtime limit per test2 seconds
memory limit per test256 megabytes
inputstandard input
outputstandard output
New Year is coming, and Jaehyun decided to read many books during 2015">
<meta property="og:type" content="article">
<meta property="og:title" content="(CodeForces) Good Bye 2014  C. New Year Book Reading 题解">
<meta property="og:url" content="http://doldre.github.io/2015/03/20/2015-03-20-(CodeForces)GoodBye2014C.NewYearBookReading题解/index.html">
<meta property="og:site_name" content="Xinchen's Blog">
<meta property="og:description" content="C. New Year Book Readingtime limit per test2 seconds
memory limit per test256 megabytes
inputstandard input
outputstandard output
New Year is coming, and Jaehyun decided to read many books during 2015">
<meta property="og:image" content="http://luoxinchen-typecho.stor.sinaapp.com/picture/CF500B.png">
<meta property="og:image" content="http://luoxinchen-typecho.stor.sinaapp.com/picture/CF500B1.png">
<meta property="og:image" content="http://luoxinchen-typecho.stor.sinaapp.com/picture/tulie-300x150.jpg">
<meta property="og:updated_time" content="2016-08-08T11:45:36.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="(CodeForces) Good Bye 2014  C. New Year Book Reading 题解">
<meta name="twitter:description" content="C. New Year Book Readingtime limit per test2 seconds
memory limit per test256 megabytes
inputstandard input
outputstandard output
New Year is coming, and Jaehyun decided to read many books during 2015">
<meta name="twitter:image" content="http://luoxinchen-typecho.stor.sinaapp.com/picture/CF500B.png">
  
    <link rel="alternative" href="/atom.xml" title="Xinchen&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="//favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="0" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Xinchen Luo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">For you thousands of times.</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						<div class="icon-wrap icon-link hide" data-idx="2">
							<div class="loopback_l"></div>
							<div class="loopback_r"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>Menu</li>
						<li>Tags</li>
						
						<li>Links</li>
						
						
						<li>Über</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">所有文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="#" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
								<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						
					</div>
				</section>
				
				
				
				<section class="switch-part switch-part3">
					<div id="js-friends">
					
			          <a target="_blank" class="main-nav-link switch-friends-link" href="http://blog.findthem.cn">Mathon</a>
			        
			        </div>
				</section>
				

				
				
				<section class="switch-part switch-part4">
				
					<div id="js-aboutme">我是谁，我从哪里来，我到哪里去？我就是我，是颜色不一样的吃货…</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Xinchen Luo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img lazy-src="0" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">Xinchen Luo</h1>
			</hgroup>
			
			<p class="header-subtitle">For you thousands of times.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">所有文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="#" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="#" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
						<a class="zhihu" target="_blank" href="#" title="zhihu">zhihu</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-2015-03-20-(CodeForces)GoodBye2014C.NewYearBookReading题解" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/03/20/2015-03-20-(CodeForces)GoodBye2014C.NewYearBookReading题解/" class="article-date">
  	<time datetime="2015-03-20T07:07:00.000Z" itemprop="datePublished">2015-03-20</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      (CodeForces) Good Bye 2014  C. New Year Book Reading 题解
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>C. New Year Book Reading<br>time limit per test<br>2 seconds</p>
<p>memory limit per test<br>256 megabytes</p>
<p>input<br>standard input</p>
<p>output<br>standard output</p>
<p>New Year is coming, and Jaehyun decided to read many books during 2015, unlike this year. He has n books numbered by integers from 1 to n. The weight of the i-th (1 ≤ i ≤ n) book is wi.</p>
<p>As Jaehyun’s house is not large enough to have a bookshelf, he keeps the n books by stacking them vertically. When he wants to read a certain book x, he follows the steps described below.</p>
<ol>
<li>He lifts all the books above book x.</li>
<li>He pushes book x out of the stack.</li>
<li>He puts down the lifted books without changing their order.</li>
<li>After reading book x, he puts book x on the top of the stack.</li>
</ol>
<p><img src="http://luoxinchen-typecho.stor.sinaapp.com/picture/CF500B.png" alt=""></p>
<p>He decided to read books for m days. In the j-th (1 ≤ j ≤ m) day, he will read the book that is numbered with integer bj (1 ≤ bj ≤ n). To read the book, he has to use the process described in the paragraph above. It is possible that he decides to re-read the same book several times.</p>
<p>After making this plan, he realized that the total weight of books he should lift during m days would be too heavy. So, he decided to change the order of the stacked books before the New Year comes, and minimize the total weight. You may assume that books can be stacked in any possible order. Note that book that he is going to read on certain step isn’t considered as lifted on that step. Can you help him?</p>
<p>Input<br>The first line contains two space-separated integers n (2 ≤ n ≤ 500) and m (1 ≤ m ≤ 1000) — the number of books, and the number of days for which Jaehyun would read books.</p>
<p>The second line contains n space-separated integers w1, w2, …, wn (1 ≤ wi ≤ 100) — the weight of each book.</p>
<p>The third line contains m space separated integers b1, b2, …, bm (1 ≤ bj ≤ n) — the order of books that he would read. Note that he can read the same book more than once.</p>
<p>Output<br>Print the minimum total weight of books he should lift, which can be achieved by rearranging the order of stacked books.</p>
<p>Sample test(s)<br>Input</p>
<pre><code>3 5
1 2 3
1 3 2 3 1
</code></pre><p>Output</p>
<pre><code>12
</code></pre><p>Note</p>
<p>Here’s a picture depicting the example. Each vertical column presents the stacked books.</p>
<p><img src="http://luoxinchen-typecho.stor.sinaapp.com/picture/CF500B1.png" alt=""></p>
<p>题解：<br>初始时只有按照取书顺序摆放书的位置时总的搬书质量最小。</p>
<p><img src="http://luoxinchen-typecho.stor.sinaapp.com/picture/tulie-300x150.jpg" alt=""></p>
<blockquote>
<p>如图：取书顺序为3 2 1，将书初始顺序放为3 2 1。可以发现，除了读过的书籍外，每次拿的未读过的书均为最上面的一本。<br>现在考虑，取书顺序为3 1 2, 而放置顺序仍为3 2 1,。 则当拿 1 书的时候 需要拿起 3 2，拿 2 书的时候需要要拿起 3 1.<br>而原来如图，拿2书 只需拿起3， 拿1书需要拿起 3 2。 所以不按照取书顺序摆放，肯定会多拿一部分书。因此按照取书顺序摆放，总的质量最小。<br>代码如下：</p>
</blockquote>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"></div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"></div><div class="line"><span class="keyword">int</span> a[<span class="number">502</span>], b[<span class="number">1003</span>], n, m;</div><div class="line"><span class="keyword">int</span> res = <span class="number">0</span>, p;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></div><div class="line">&#123;</div><div class="line">	<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) <span class="built_in">cin</span> &gt;&gt; a[i], b[i] = <span class="number">-1</span>;</div><div class="line">	<span class="comment">/*最开始所有书都没有取过，所以默认初始位置全为-1，</span></div><div class="line">	如果第一本书第一次被取，它肯定在所有未被取过的书的最上面*/</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</div><div class="line">	&#123;</div><div class="line">		<span class="built_in">cin</span> &gt;&gt; p;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; j++)</div><div class="line">			<span class="keyword">if</span> (b[j] &gt; b[p]) res += a[j];</div><div class="line">		<span class="comment">//加上位置在这本书上面的所有书的重量</span></div><div class="line">		b[p] = i;<span class="comment">//将该书放到最上面去</span></div><div class="line">	&#125;</div><div class="line">	<span class="built_in">cout</span> &lt;&lt; res;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2015/03/26/2015-03-26-UVa12171（离散化，BFS，FloodFill）/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          UVa 12171（离散化，BFS，FloodFill）
        
      </div>
    </a>
  
  
    <a href="/2015/03/20/2015-03-20-Aboutme/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">About me</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">Share to: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>








</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Xinchen Luo
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: /
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>






<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  </div>
</body>
</html>