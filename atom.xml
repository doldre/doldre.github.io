<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Xinchen&#39;s Blog</title>
  <subtitle>For you thousands of times.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://luoxinchen.me/"/>
  <updated>2016-09-11T15:01:30.000Z</updated>
  <id>http://luoxinchen.me/</id>
  
  <author>
    <name>Xinchen Luo</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest4-1010</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1010/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1010/</id>
    <published>2016-09-11T14:58:25.000Z</published>
    <updated>2016-09-11T15:01:30.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定长度为n的数列a。你可以将0改成任意整数。<br>求改动后最长上升子序列的最大值</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>LIS问题变种，我是设置一个flag，然后二分来做，也可以对于每个权值S[i],减去i前面的0的个数，在做LIS，最后加上0的个数<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const int maxn = 1e5 + 5;</div><div class="line">int dp[maxn*2];</div><div class="line">int S[maxn];</div><div class="line">int off;</div><div class="line">int n;</div><div class="line">int head, tail; </div><div class="line"></div><div class="line">int bin_search(int x) &#123;</div><div class="line">    int l = head - 1, r = tail;</div><div class="line">    while(l &lt; r - 1) &#123;</div><div class="line">        int m = (l + r) &gt;&gt; 1;</div><div class="line">        if(dp[m] + off &gt;= x) &#123;</div><div class="line">            r = m;</div><div class="line">        &#125; else l = m;</div><div class="line">    &#125;</div><div class="line">    return r;</div><div class="line">&#125;</div><div class="line">const int inf = 0x3f3f3f3f;</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    for (int Cas = 1; Cas &lt;= T; Cas++) &#123;</div><div class="line">        scanf("%d", &amp;n);</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            scanf("%d", &amp;S[i]);</div><div class="line">        &#125;</div><div class="line">        memset(dp, -inf, sizeof(dp));</div><div class="line">        head = tail = maxn;</div><div class="line">        off = 0;</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            int a = S[i];</div><div class="line">            if(a == 0) &#123;</div><div class="line">                head--;</div><div class="line">                off++;</div><div class="line">                dp[head] = -off;</div><div class="line">            &#125; else &#123;</div><div class="line">                int p = bin_search(a);</div><div class="line">                if(p == tail) &#123;</div><div class="line">                    dp[tail++] = a - off;</div><div class="line">                &#125; else &#123;</div><div class="line">                    dp[p] = a - off;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        printf("Case #%d: %d\n", Cas, tail - head);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定长度为n的数列a。你可以将0改成任意整数。&lt;br&gt;求改动后最长上升子序列的最大值&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;LIS问题变种，我是设置一个flag，然后二分来做，也可以对于每个权值S[i],减去i前面的0的个数，在做LIS，最后加上0的个数&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="LIS" scheme="http://luoxinchen.me/tags/LIS/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest4-1009</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1009/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1009/</id>
    <published>2016-09-11T14:55:33.000Z</published>
    <updated>2016-09-11T14:57:49.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>最大权闭合子图问题</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>网络流，详情见国家集训队论文<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">const int inf = 0x3f3f3f3f;</div><div class="line">const int maxv = 30000+ 5;</div><div class="line"></div><div class="line">struct Dinic &#123;</div><div class="line">    struct edge &#123;</div><div class="line">        int to, cap, rev; </div><div class="line">        edge() &#123;&#125;</div><div class="line">        edge(int to, int cap, int rev):to(to), cap(cap), rev(rev) &#123;&#125;</div><div class="line">    &#125;;</div><div class="line">    </div><div class="line">    vector&lt;edge&gt; G[maxv];</div><div class="line">    int num_v;</div><div class="line">    int level[maxv];</div><div class="line">    int iter[maxv];</div><div class="line"></div><div class="line">    void add_edge(int from, int to, int cap) &#123;</div><div class="line">        G[from].push_back(edge(to, cap, (int)G[to].size()));</div><div class="line">        G[to].push_back(edge(from, 0, (int)G[from].size() - 1));</div><div class="line">    &#125;</div><div class="line">   </div><div class="line">    void init(int num_v) &#123;</div><div class="line">        this-&gt;num_v = num_v;</div><div class="line">        for (int i = 0; i &lt;= num_v; i++) G[i].clear();</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    void bfs(int s) &#123;</div><div class="line">        memset(level, -1, sizeof(level));</div><div class="line">        queue&lt;int&gt; que;</div><div class="line">        level[s] = 0;</div><div class="line">        que.push(s);</div><div class="line">        while(!que.empty()) &#123;</div><div class="line">            int v = que.front(); que.pop();</div><div class="line">            for (int i = 0; i &lt; (int)G[v].size(); i++) &#123;</div><div class="line">                edge &amp;e = G[v][i];</div><div class="line">                if (e.cap &gt; 0 &amp;&amp; level[e.to] &lt; 0) &#123;</div><div class="line">                    level[e.to] = level[v] + 1;</div><div class="line">                    que.push(e.to);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    int dfs(int v, int t, int f) &#123;</div><div class="line">        if (v == t) return f;</div><div class="line">        for (int &amp;i = iter[v]; i &lt; (int)G[v].size(); i++) &#123;</div><div class="line">            edge &amp;e = G[v][i];</div><div class="line">            if (e.cap &gt; 0 &amp;&amp; level[v] &lt; level[e.to]) &#123;</div><div class="line">                int d = dfs(e.to, t, min(f, e.cap));</div><div class="line">                if( d &gt; 0) &#123;</div><div class="line">                    e.cap -= d;</div><div class="line">                    G[e.to][e.rev].cap += d;</div><div class="line">                    return d;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    int max_flow(int s, int t) &#123;</div><div class="line">        int flow = 0;</div><div class="line">        for (;;) &#123;</div><div class="line">            bfs(s);</div><div class="line">            if(level[t] &lt; 0) return flow;</div><div class="line">            memset(iter, 0, sizeof(iter));</div><div class="line">            int f;</div><div class="line">            while((f = dfs(s, t, inf)) &gt; 0) &#123;</div><div class="line">                flow += f;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;dinic;</div><div class="line"></div><div class="line">const int maxn = 100 + 5;</div><div class="line">char str[maxn];</div><div class="line">int A[10], B[10];</div><div class="line">int w[maxn][maxn];</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    for (int Cas = 1; Cas &lt;= T; Cas++) &#123;</div><div class="line">        int n; scanf("%d", &amp;n);</div><div class="line">        scanf("%s", str);</div><div class="line">        for (int i = 0; i &lt; 10; i++) &#123;</div><div class="line">            scanf("%d%d", &amp;A[i], &amp;B[i]);</div><div class="line">        &#125;</div><div class="line">        int tot = 0;</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; n; j++) &#123;</div><div class="line">                scanf("%d", &amp;w[i][j]);</div><div class="line">                tot += w[i][j];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        dinic.init(maxv - 1);</div><div class="line">        int s = n * n + n + 15, t = s + 1;</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            for (int j = i + 1; j &lt; n; j++) &#123;</div><div class="line">                dinic.add_edge(i * n + j, n * n + i, inf);</div><div class="line">                dinic.add_edge(i * n + j, n * n + j, inf);</div><div class="line">                dinic.add_edge(s, i * n + j, w[i][j] + w[j][i]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            dinic.add_edge(n * n + i, t, A[str[i] - '0']);</div><div class="line">            dinic.add_edge(n * n + i, n * n + n + str[i] - '0', inf);</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt; 10; i++) &#123;</div><div class="line">            dinic.add_edge(n * n + n + i, t, B[i] - A[i]);</div><div class="line">        &#125;</div><div class="line">        int min_cut = dinic.max_flow(s, t);</div><div class="line">        // prln(min_cut);</div><div class="line">        printf("Case #%d: %d\n", Cas, tot - min_cut);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;最大权闭合子图问题&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;网络流，详情见国家集训队论文&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="网络流" scheme="http://luoxinchen.me/tags/%E7%BD%91%E7%BB%9C%E6%B5%81/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest4-1005</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1005/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1005/</id>
    <published>2016-09-11T14:52:01.000Z</published>
    <updated>2016-09-11T14:54:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定n元数组p和a。<br>求[L,R]中有多少整数k满足k mod pi ≠ ai，且k是7的倍数</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>中国剩余定理,这里需要注意直接乘法会溢出，需要快速乘<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">ll Extended_Euclid(ll a,ll b,ll &amp;x,ll &amp;y)    //扩展欧几里得算法  </div><div class="line">&#123;  </div><div class="line">    ll d;  </div><div class="line">    if(b==0)  </div><div class="line">    &#123;  </div><div class="line">        x=1;y=0;  </div><div class="line">        return a;  </div><div class="line">    &#125;  </div><div class="line">    d= Extended_Euclid(b,a%b,y,x);  </div><div class="line">    y-=a/b*x;  </div><div class="line">    return d;  </div><div class="line">&#125;  </div><div class="line"></div><div class="line">ll mod_multipy(ll a, ll b, ll mod) &#123;</div><div class="line">    ll res = 0;</div><div class="line">    while(b &gt; 0) &#123;</div><div class="line">        if(b &amp; 1) &#123;</div><div class="line">            res = (res + a) % mod;</div><div class="line">        &#125;</div><div class="line">        b &gt;&gt;= 1;</div><div class="line">        a = (a + a) % mod;</div><div class="line">    &#125;</div><div class="line">    return res;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll Chinese_Remainder(ll a[],ll w[],ll len)    //中国剩余定理  a[]存放余数  w[]存放两两互质的数  </div><div class="line">&#123;  </div><div class="line">    ll i,d,x,y,m,n,ret;  </div><div class="line">    ret=0;  </div><div class="line">    n=1;  </div><div class="line">    for (i=0;i&lt;len;i++)  </div><div class="line">        n*=w[i];  </div><div class="line">    for (i=0;i&lt;len;i++)  </div><div class="line">    &#123;  </div><div class="line">        m = n/w[i];  </div><div class="line">        d=Extended_Euclid(w[i],m,x,y);  </div><div class="line">        ret=(ret+(__int128)y*m*a[i])%n;  </div><div class="line">        // ret = (ret + mod_multipy(mod_multipy(y, m, n), a[i], n)) % n;</div><div class="line">    &#125;  </div><div class="line">    return (n+ret%n)%n;  </div><div class="line">&#125;  </div><div class="line"></div><div class="line">ll cal(ll x, ll y, ll m, ll a) &#123;</div><div class="line">    ll ans1 = (x - 1) / m + ((x - 1) % m &gt;= a);</div><div class="line">    ll ans2 = y / m + (y % m &gt;= a);</div><div class="line">    return ans2 - ans1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const int maxn = 25;</div><div class="line">int n;</div><div class="line">ll x, y;</div><div class="line">int p[maxn], a[maxn];</div><div class="line">ll A[maxn], M[maxn];</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    for (int Cas = 1; Cas &lt;= T; Cas++) &#123;</div><div class="line">        scanf("%d%lld%lld", &amp;n, &amp;x, &amp;y);</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            scanf("%d%d", &amp;p[i], &amp;a[i]);</div><div class="line">        &#125;</div><div class="line">        __int128 ans = 0;</div><div class="line">        M[0] = 7, A[0] = 0;</div><div class="line">        int cnt_n = 1;</div><div class="line">        for (int mask = 0; mask &lt; (1&lt;&lt;n); mask++) &#123;</div><div class="line">            int cnt_one = __builtin_popcount(mask);</div><div class="line">            cnt_n = 1;</div><div class="line">            ll tot = 7;</div><div class="line">            for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">                if((mask&gt;&gt;i) &amp; 1) &#123;</div><div class="line">                    M[cnt_n] = p[i];</div><div class="line">                    A[cnt_n++] = a[i];</div><div class="line">                    tot *= p[i];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            ll rem = Chinese_Remainder(A, M, cnt_n);</div><div class="line">            if(cnt_one &amp; 1) &#123;</div><div class="line">                ans -= cal(x, y, tot, rem);</div><div class="line">            &#125; else &#123;</div><div class="line">                ans += cal(x, y, tot, rem);</div><div class="line">            &#125;</div><div class="line">            // pr(mask);</div><div class="line">            // prln(ans);</div><div class="line">        &#125;</div><div class="line">        printf("Case #%d: %lld\n", Cas, (ll)ans);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定n元数组p和a。&lt;br&gt;求[L,R]中有多少整数k满足k mod pi ≠ ai，且k是7的倍数&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;中国剩余定理,这里需要注意直接乘法会溢出，需要快速乘&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="中国剩余定理" scheme="http://luoxinchen.me/tags/%E4%B8%AD%E5%9B%BD%E5%89%A9%E4%BD%99%E5%AE%9A%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest4-1003</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1003/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1003/</id>
    <published>2016-09-11T14:49:34.000Z</published>
    <updated>2016-09-11T14:52:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定n个点m条边的无向连通图。求图中极小割集的数量。<br>定义一个图的割集为一个边集，且删去该集合中的边后图不再连通。<br>定义一个图的极小割集为不包含任何子割集的割集。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>极小割边集的定义下割边集恰好会将原图分成两块。枚举左右两块是否独立连通。块连通必然可以删掉一个点，这个点与剩下的点有边且剩下的点连通，可以先状压每个点的边, DP转移即可。<br>接下来要处理的是将两个块之间的边加一。这部分可以处理成将左块中的边减一，右块中的边减一，整体加一。操作变成了把一个块的边加权值的操作。考虑一条边表达成形如 0..010..010..00..010..010..0的形式，它在所有块中的权值总和，便是求一遍把这个形式作为子集的集合的权值和，求一遍高维前缀和就可以了。</p>
<a id="more"></a>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const int maxn = 22;</div><div class="line">int edge[maxn];</div><div class="line">int n, m;</div><div class="line">int cnt[1&lt;&lt;maxn];</div><div class="line">int U[maxn*maxn], V[maxn*maxn];</div><div class="line">int ind[1&lt;&lt;maxn];</div><div class="line"></div><div class="line">inline int lowbit(int x) &#123;</div><div class="line">    return x &amp; (-x);</div><div class="line">&#125;</div><div class="line"></div><div class="line">bool check(int mask) &#123;</div><div class="line">    int done = 0;</div><div class="line">    int did = lowbit(mask);</div><div class="line">    while(ind[lowbit(did^done)] != -1) &#123;</div><div class="line">        int u = ind[lowbit(did^done)];</div><div class="line">        // prln(u);</div><div class="line">        done |= 1&lt;&lt;u;</div><div class="line">        int v = mask &amp; edge[u];</div><div class="line">        did |= v;</div><div class="line">    &#125;</div><div class="line">    // pr(mask); prln(done);</div><div class="line">    return done == mask;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    memset(ind, -1, sizeof(ind));</div><div class="line">    for (int i = 0; i &lt; maxn; i++) ind[1&lt;&lt;i] = i;</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    for (int Cas = 1; Cas &lt;= T; Cas++) &#123;</div><div class="line">        scanf("%d%d", &amp;n, &amp;m);</div><div class="line">        memset(edge, 0, sizeof(edge));</div><div class="line">        memset(cnt, 0, sizeof(cnt));</div><div class="line">        for (int i = 0; i &lt; m; i++) &#123;</div><div class="line">            int u, v;</div><div class="line">            scanf("%d%d", &amp;u, &amp;v);</div><div class="line">            edge[u] |= 1 &lt;&lt; v;</div><div class="line">            edge[v] |= 1 &lt;&lt; u;</div><div class="line">            U[i] = u; V[i] = v;</div><div class="line">        &#125;</div><div class="line">        int base = (1&lt;&lt;n) - 1;</div><div class="line">        int tot = 0;</div><div class="line">        for (int mask = 1; mask &lt; base; mask++) &#123;</div><div class="line">            if(mask &amp; 1) &#123;</div><div class="line">                if(check(mask) &amp;&amp; check(mask ^ base)) &#123;</div><div class="line">                    // prln(mask);</div><div class="line">                    cnt[mask] = 1; cnt[mask ^ base] = 1;</div><div class="line">                    tot++;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        for (int i = 1&lt;&lt;n; i &gt; 0; i &gt;&gt;= 1) &#123;</div><div class="line">            for (int j = 0; j &lt;= base; j++) &#123;</div><div class="line">                if(i &amp; j) &#123;</div><div class="line">                    cnt[j ^ i] += cnt[j];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        printf("Case #%d:", Cas);</div><div class="line">        for (int i = 0; i &lt; m; i++) &#123;</div><div class="line">            int u = U[i], v = V[i];</div><div class="line">            printf(" %d", tot - cnt[(1&lt;&lt;u) | (1&lt;&lt;v)]);</div><div class="line">        &#125;</div><div class="line">        puts("");</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定n个点m条边的无向连通图。求图中极小割集的数量。&lt;br&gt;定义一个图的割集为一个边集，且删去该集合中的边后图不再连通。&lt;br&gt;定义一个图的极小割集为不包含任何子割集的割集。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;极小割边集的定义下割边集恰好会将原图分成两块。枚举左右两块是否独立连通。块连通必然可以删掉一个点，这个点与剩下的点有边且剩下的点连通，可以先状压每个点的边, DP转移即可。&lt;br&gt;接下来要处理的是将两个块之间的边加一。这部分可以处理成将左块中的边减一，右块中的边减一，整体加一。操作变成了把一个块的边加权值的操作。考虑一条边表达成形如 0..010..010..00..010..010..0的形式，它在所有块中的权值总和，便是求一遍把这个形式作为子集的集合的权值和，求一遍高维前缀和就可以了。&lt;/p&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="高维前缀和" scheme="http://luoxinchen.me/tags/%E9%AB%98%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest4-1001</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1001/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest4-1001/</id>
    <published>2016-09-11T14:47:46.000Z</published>
    <updated>2016-09-11T14:49:22.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给一个模式串p，一个字符串s，p有两种题意，问s可以解释为多少种意思。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>kmp + dp<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">void get_next(char x[], int m, int next[]) &#123;</div><div class="line">    int i, j;</div><div class="line">    j = next[0] = -1;</div><div class="line">    i = 0;</div><div class="line">    while(i &lt; m) &#123;</div><div class="line">        while(j != -1 &amp;&amp; x[i] != x[j]) j = next[j];</div><div class="line">        next[++i] = ++j;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/* 优化版本 */</div><div class="line">void get_next_o(char x[], int m, int kmpNext[]) &#123;</div><div class="line">    int i, j;</div><div class="line">    j = kmpNext[0] = -1;</div><div class="line">    i = 0;</div><div class="line">    while(i &lt; m) &#123;</div><div class="line">        while(j != -1 &amp;&amp; x[i] != x[j]) j = kmpNext[j];</div><div class="line">        if(x[++i] == x[++j]) kmpNext[i] = kmpNext[j];</div><div class="line">        else kmpNext[i] = j;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const int maxn = 1e5 + 5;</div><div class="line">int nxt[maxn];</div><div class="line">bool vised[maxn];</div><div class="line">int kmp_count(char x[], int m, char y[], int n) &#123;</div><div class="line">    int i, j;</div><div class="line">    int ans = 0;</div><div class="line">    get_next_o(x, m, nxt);</div><div class="line">    i = j = 0;</div><div class="line">    while(i &lt; n) &#123;</div><div class="line">        while(j != -1 &amp;&amp; y[i] != x[j]) j = nxt[j];</div><div class="line">        i++; j++;</div><div class="line">        if(j &gt;= m) &#123;</div><div class="line">            vised[i] = true;</div><div class="line">            ans++;</div><div class="line">            j = nxt[j];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return ans;</div><div class="line">&#125;</div><div class="line"></div><div class="line">char A[maxn], B[maxn];</div><div class="line">ll dp[maxn][2];</div><div class="line">const ll mod = 1e9 + 7;</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    for (int Cas = 1; Cas &lt;= T; Cas++) &#123;</div><div class="line">        scanf("%s%s", A, B);</div><div class="line">        int lena = strlen(A), lenb = strlen(B);</div><div class="line">        memset(vised, 0, sizeof(vised));</div><div class="line">        kmp_count(B, lenb, A, lena);</div><div class="line">        memset(dp, 0, sizeof(dp));</div><div class="line">        dp[0][0] = 1;</div><div class="line">        for (int i = 1; i &lt;= lena; i++) &#123;</div><div class="line">            dp[i][0] = (dp[i-1][0] + dp[i-1][1]) % mod;</div><div class="line">            if(vised[i]) &#123;</div><div class="line">                dp[i][1] = (dp[i-lenb][0] + dp[i-lenb][1]) % mod;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        printf("Case #%d: %lld\n", Cas, (dp[lena][0] + dp[lena][1]) % mod);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给一个模式串p，一个字符串s，p有两种题意，问s可以解释为多少种意思。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;kmp + dp&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="kmp" scheme="http://luoxinchen.me/tags/kmp/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest3-1010</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1010/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1010/</id>
    <published>2016-09-11T14:42:43.000Z</published>
    <updated>2016-09-11T14:44:06.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>平面直角坐标系上，有一艘小船在(0,a)。河流带着小船朝x轴正方向运动，速度v2。小船船速v1，航向始终指向(0,0)。求需要多少时间小船能到达(0,0)。如果永远无法到达，输出”Infinity”。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>推出公式即可<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int a, v1, v2;</div><div class="line">    while(scanf("%d%d%d", &amp;a, &amp;v1, &amp;v2) == 3) &#123;</div><div class="line">        if(a == 0) &#123;</div><div class="line">            printf("0\n");</div><div class="line">        &#125; else &#123;</div><div class="line">            if(v1 &lt;= v2) &#123;</div><div class="line">                printf("Infinity\n");</div><div class="line">            &#125; else &#123;</div><div class="line">                printf("%.10f\n", double(a) * v1 / (v1 * v1 - v2 * v2));</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;平面直角坐标系上，有一艘小船在(0,a)。河流带着小船朝x轴正方向运动，速度v2。小船船速v1，航向始终指向(0,0)。求需要多少时间小船能到达(0,0)。如果永远无法到达，输出”Infinity”。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;推出公式即可&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="物理题" scheme="http://luoxinchen.me/tags/%E7%89%A9%E7%90%86%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest3-1007</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1007/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1007/</id>
    <published>2016-09-11T14:39:54.000Z</published>
    <updated>2016-09-11T14:44:14.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定一棵n个点的数。<br>你可以任意选取一个起点，每次可以经过一条边走到一个相邻的结点，也可以使用一次传送到任意一个结点。要求一条边不能连续经过两次。结束条件是经过树上每条边至少一次。<br>求在最小化传送次数的情况下，最少需要经过的边数。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>树形dp<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const int inf = 0x3f3f3f3f;</div><div class="line">const int maxn = 1e5 + 5;</div><div class="line">int cnt_leaves[maxn];</div><div class="line">int dp[maxn][2];</div><div class="line">vector&lt;int&gt; G[maxn];</div><div class="line"></div><div class="line">void dfs(int u, int fa) &#123;</div><div class="line">    for (int i = 0; i &lt; (int)G[u].size(); i++) &#123;</div><div class="line">        int v = G[u][i];</div><div class="line">        if(v == fa) continue;</div><div class="line">        dfs(v, u);</div><div class="line">        cnt_leaves[u] += cnt_leaves[v];</div><div class="line">        dp[u][0] += dp[v][0] + ((cnt_leaves[v] &amp; 1) ? 1 : 2);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    dp[u][1] = dp[u][0];</div><div class="line">    for (int i = 0; i &lt; (int)G[u].size(); i++) &#123;</div><div class="line">        int v = G[u][i];</div><div class="line">        if(v == fa) continue;</div><div class="line">        dp[u][1] = min(dp[u][1], </div><div class="line">                dp[u][0] - dp[v][0] + dp[v][1] + ((cnt_leaves[v] &amp; 1) ? 1 : -1));</div><div class="line">    &#125;</div><div class="line">    if(G[u].size() == 1) &#123;</div><div class="line">        dp[u][0] = 0;</div><div class="line">        dp[u][1] = 0;</div><div class="line">        cnt_leaves[u] =  1;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    int n;</div><div class="line">    while(T--) &#123;</div><div class="line">        scanf("%d", &amp;n);</div><div class="line">        for (int i = 0; i &lt;= n; i++) G[i].clear();</div><div class="line">        for (int i = 0; i &lt; n - 1; i++) &#123;</div><div class="line">            int x, y;</div><div class="line">            scanf("%d%d", &amp;x, &amp;y);</div><div class="line">            G[x].push_back(y);</div><div class="line">            G[y].push_back(x);</div><div class="line">        &#125;</div><div class="line">        memset(cnt_leaves, 0, sizeof(cnt_leaves));</div><div class="line">        memset(dp, 0, sizeof(dp));</div><div class="line">        if(n == 2) &#123;</div><div class="line">            puts("1");</div><div class="line">            continue; </div><div class="line">        &#125;</div><div class="line">        int u = 1;</div><div class="line">        for (u = 1; u &lt;= n &amp;&amp; G[u].size() == 1; u++);</div><div class="line">        dfs(u, -1);</div><div class="line">        printf("%d\n", dp[u][cnt_leaves[u] &amp; 1]);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定一棵n个点的数。&lt;br&gt;你可以任意选取一个起点，每次可以经过一条边走到一个相邻的结点，也可以使用一次传送到任意一个结点。要求一条边不能连续经过两次。结束条件是经过树上每条边至少一次。&lt;br&gt;求在最小化传送次数的情况下，最少需要经过的边数。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;树形dp&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="树形dp" scheme="http://luoxinchen.me/tags/%E6%A0%91%E5%BD%A2dp/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest3-1005</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1005/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1005/</id>
    <published>2016-09-11T14:31:53.000Z</published>
    <updated>2016-09-11T14:45:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定n个点的有根数，根为1.<br>给出q个询问。每次询问给出一个点集A1,A2,…,Ax。<br>定义x是好点当且仅当不存在一个A中的点事x的祖先。<br>对于每个询问，求出好点之间距离的最大值，最小值，以及和。<br><a id="more"></a></p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>我们可以用主席树对于所有点，维护出他到所有点的距离。</p>
<p>大致过程就是，对于一号点，他到所有点的距离为该点的深度减一。<br>接着我们~DFS~整棵树，每到一个节点，就将子树中的点距离减一，不是子树的点距离加一。<br>我们可以得到每一个点的~DFS~序，这样只需要用主席树支持区间加减，维护区间和、区间最小值、区间最大值即可。</p>
<p>对于每次询问，所给的~Ai~都对应一些~DFS~序区间，我们把这些区间取并，然后取补集。<br>这样整个~DFS~序会有~KK~段区间是</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">template&lt;class T&gt; inline T lowbit(T x) &#123; return x &amp; (-x); &#125;</div><div class="line">const ll INF = 1e15;</div><div class="line">const int maxk = 2e5 + 5;</div><div class="line">const int MAXN = 5e4 + 5;</div><div class="line">vector&lt;int&gt; G[MAXN];</div><div class="line">int L[MAXN], R[MAXN], dfsNum;</div><div class="line">int root[MAXN];</div><div class="line">int dep[MAXN];</div><div class="line">int N, Q;</div><div class="line"></div><div class="line">void dfs(int u, int fa, int deep) &#123;</div><div class="line">    L[u] = ++dfsNum;</div><div class="line">    dep[dfsNum] = deep;</div><div class="line">    for (int i = 0; i &lt; (int)G[u].size(); i++) &#123;</div><div class="line">        int v = G[u][i];</div><div class="line">        if(v == fa) continue;</div><div class="line">        dfs(v, u, deep + 1);</div><div class="line">    &#125;</div><div class="line">    R[u] = dfsNum;</div><div class="line">&#125;</div><div class="line"></div><div class="line">struct HJT_Tree &#123;</div><div class="line">    struct Node &#123;</div><div class="line">        int ls, rs, Max, Min;</div><div class="line">        ll sum, lazy;</div><div class="line">    &#125;T[MAXN * 50];</div><div class="line">    int tot;</div><div class="line">    void init() &#123;</div><div class="line">        tot = 0;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    void up(int u, int len) &#123;</div><div class="line">        T[u].sum = T[T[u].ls].sum + T[T[u].rs].sum + T[u].lazy * len;</div><div class="line">        T[u].Min = min(T[T[u].ls].Min, T[T[u].rs].Min) + T[u].lazy;</div><div class="line">        T[u].Max = max(T[T[u].ls].Max, T[T[u].rs].Max) + T[u].lazy;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    void build(int &amp;u, int l, int r) &#123;</div><div class="line">        u = ++tot;</div><div class="line">        T[u].lazy = 0;</div><div class="line">        int m = (l + r) &gt;&gt; 1;</div><div class="line">        if(l == r) &#123;</div><div class="line">            T[u].Max = T[u].Min = T[u].sum = dep[l];</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        build(T[u].ls, l, m);</div><div class="line">        build(T[u].rs, m + 1, r);</div><div class="line">        up(u, r - l + 1);</div><div class="line">    &#125;</div><div class="line">   </div><div class="line">    void Modify(int &amp;u, int l, int r, int x, int y, int z) &#123;</div><div class="line">        T[++tot] = T[u];</div><div class="line">        u = tot;</div><div class="line">        int m = (l + r) &gt;&gt; 1;</div><div class="line">        if(x &lt;= l &amp;&amp; r &lt;= y) &#123;</div><div class="line">            T[u].Max += z;</div><div class="line">            T[u].Min += z;</div><div class="line">            T[u].sum += (ll)z * (r - l + 1);</div><div class="line">            T[u].lazy += z;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        if(x &lt;= m) Modify(T[u].ls, l, m, x, y, z);</div><div class="line">        if(m  &lt; y) Modify(T[u].rs, m + 1, r, x, y, z);</div><div class="line">        up(u, r - l + 1);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    ll query1(int u, int l, int r, int x, int y) &#123;</div><div class="line">        if(x == l &amp;&amp; r == y) &#123;</div><div class="line">            return T[u].sum;</div><div class="line">        &#125;</div><div class="line">        int m = (l + r) &gt;&gt; 1;</div><div class="line">        ll ans = (ll)(y - x + 1) * T[u].lazy;</div><div class="line">        if(y &lt;= m) ans += query1(T[u].ls, l, m, x, y);</div><div class="line">        else if(x &gt; m) ans += query1(T[u].rs, m + 1, r, x, y);</div><div class="line">        else &#123;</div><div class="line">            ans += query1(T[u].ls, l, m, x, m);</div><div class="line">            ans += query1(T[u].rs, m + 1, r, m + 1, y);</div><div class="line">        &#125;</div><div class="line">        // pr(l); prln(r);</div><div class="line">        // pr(u);</div><div class="line">        // prln(ans);</div><div class="line">        return ans;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    ll query2(int u, int l, int r, int x, int y) &#123;</div><div class="line">        ll ans = INF;</div><div class="line">        if(x &lt;= l &amp;&amp; r &lt;= y) &#123;</div><div class="line">            return T[u].Min;</div><div class="line">        &#125;</div><div class="line">        int m = (l + r) &gt;&gt; 1;</div><div class="line">        if(x &lt;= m) ans = min(ans, query2(T[u].ls, l, m, x, y) + T[u].lazy);</div><div class="line">        if(m &lt; y) ans = min(ans, query2(T[u].rs, m + 1, r, x, y) + T[u].lazy);</div><div class="line">        return ans;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    ll query3(int u, int l, int r, int x, int y) &#123;</div><div class="line">        ll ans = 0;</div><div class="line">        if(x &lt;= l &amp;&amp; r &lt;= y) &#123;</div><div class="line">            return T[u].Max;</div><div class="line">        &#125;</div><div class="line">        int m = (l + r) &gt;&gt; 1;</div><div class="line">        if(x &lt;= m) ans = max(ans, query3(T[u].ls, l, m, x, y) + T[u].lazy);</div><div class="line">        if(m &lt; y) ans = max(ans, query3(T[u].rs, m + 1, r, x, y) + T[u].lazy);</div><div class="line">        return ans;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;tree;</div><div class="line"></div><div class="line">void dfs2(int u, int fa) &#123;</div><div class="line">    for (int i = 0; i &lt; (int)G[u].size(); i++) &#123;</div><div class="line">        int v = G[u][i];</div><div class="line">        if(v == fa) continue;</div><div class="line">        root[v] = root[u];</div><div class="line">        tree.Modify(root[v], 1, N, 1, N, 1);</div><div class="line">        tree.Modify(root[v], 1, N, L[v], R[v], -2);</div><div class="line">        dfs2(v, u);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">pii inter[maxk*2];</div><div class="line">int cnt_inter;</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    freopen("1005.in", "r", stdin);</div><div class="line">    freopen("1005.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int Cas = 0;</div><div class="line">    while(scanf("%d%d", &amp;N, &amp;Q) == 2) &#123;</div><div class="line">        for (int i = 0; i &lt;= N; i++) &#123;</div><div class="line">            G[i].clear();</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt; N - 1; i++) &#123;</div><div class="line">            int u, v;</div><div class="line">            scanf("%d%d", &amp;u, &amp;v);</div><div class="line">            G[u].push_back(v); G[v].push_back(u);</div><div class="line">        &#125;</div><div class="line">        memset(root, 0, sizeof(root));</div><div class="line">        dfsNum = 0;</div><div class="line">        dfs(1, -1, 0);</div><div class="line">        tree.init();</div><div class="line">        tree.build(root[1], 1, N);</div><div class="line">        dfs2(1, -1);</div><div class="line">        int last_ans = 0;</div><div class="line">        while(Q--) &#123;</div><div class="line">            int K, P, T;</div><div class="line">            ++Cas;</div><div class="line">            bool debug = false;</div><div class="line">            // if(Cas == 11) debug = true;</div><div class="line">            scanf("%d%d%d", &amp;K, &amp;P, &amp;T);</div><div class="line">            if(debug) &#123;</div><div class="line">                printf("K = %d P = %d T = %d\n", K, P, T);</div><div class="line">            &#125;</div><div class="line">            P = (P + last_ans) % N + 1;</div><div class="line">            if(debug) &#123;</div><div class="line">                printf("K = %d P = %d T = %d\n", K, P, T);</div><div class="line">            &#125;</div><div class="line">            cnt_inter = 0;</div><div class="line">            for (int i = 1; i &lt;= K; i++) &#123;</div><div class="line">                int x; scanf("%d", &amp;x);</div><div class="line">                // inter.push_back(pii(L[x], 1));</div><div class="line">                // inter.push_back(pii(R[x] + 1, -1));</div><div class="line">                inter[cnt_inter++] = pii(L[x], 1);</div><div class="line">                inter[cnt_inter++] = pii(R[x] + 1, -1);</div><div class="line">                // pr(L[x]); prln(R[x]);</div><div class="line">            &#125;</div><div class="line">            // inter.push_back(pii(N + 1, 1));</div><div class="line">            inter[cnt_inter++] = pii(N + 1, 1);</div><div class="line">            sort(inter, inter + cnt_inter);</div><div class="line">            int last = 1, flag = 0, ok = 1;</div><div class="line">            ll ans;</div><div class="line">            if(T == 1) &#123;</div><div class="line">                ans = 0;</div><div class="line">            &#125; else if(T == 3) &#123;</div><div class="line">                ans = -1;</div><div class="line">            &#125; else ans = INF;</div><div class="line"></div><div class="line">            bool suc = false; </div><div class="line">            for (int i = 0; i &lt; cnt_inter; i++) &#123;</div><div class="line">                flag += inter[i].yy;</div><div class="line">                if(flag == 0) &#123;</div><div class="line">                    last = inter[i].xx;</div><div class="line">                    ok = 1;</div><div class="line">                &#125;</div><div class="line">                if(flag == 1 &amp;&amp; ok) &#123;</div><div class="line">                    ok = 0;</div><div class="line">                    int l = last, r = inter[i].xx - 1;</div><div class="line">                    if(l &gt; r) continue;</div><div class="line">                    if(debug) &#123;</div><div class="line">                        pr(l); prln(r);</div><div class="line">                    &#125;</div><div class="line">                    suc = true;</div><div class="line">                    if(T == 1) &#123;</div><div class="line">                        // pr(l); prln(r);</div><div class="line">                        ll tmp = tree.query1(root[P], 1, N, l, r);</div><div class="line">                        // prln(tmp);</div><div class="line">                        ans += tmp;</div><div class="line">                    &#125; else if(T == 2) &#123;</div><div class="line">                        ans = min(ans, tree.query2(root[P], 1, N, l, r));</div><div class="line">                    &#125; else if(T == 3) &#123;</div><div class="line">                        ll tmp = tree.query3(root[P], 1, N, l, r);</div><div class="line">                        // prln(tmp);</div><div class="line">                        ans = max(ans, tmp);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            if(T == 1 &amp;&amp; suc == false) ans = -1;</div><div class="line">            if(T == 2 &amp;&amp; ans == INF) ans = -1;</div><div class="line">            if(ans == -1) last_ans = 0;</div><div class="line">            else last_ans = ans;</div><div class="line">            printf("%lld\n", ans);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定n个点的有根数，根为1.&lt;br&gt;给出q个询问。每次询问给出一个点集A1,A2,…,Ax。&lt;br&gt;定义x是好点当且仅当不存在一个A中的点事x的祖先。&lt;br&gt;对于每个询问，求出好点之间距离的最大值，最小值，以及和。&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="主席树" scheme="http://luoxinchen.me/tags/%E4%B8%BB%E5%B8%AD%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest3-1004</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1004/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1004/</id>
    <published>2016-09-11T14:26:05.000Z</published>
    <updated>2016-09-11T14:30:16.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定一个nxm的矩阵，每个格子中有0，1，2中的一个整数。<br>可以对矩阵进行若干次如下操作。选定一个格子将其值+2，其上下左右四个格子分别+1。均在模3的意义下进行。求一种方案可以将矩阵清零。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>高斯消元，因为这里0元素很多，所以高斯消元复杂度并不会超。<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const int MAXN = 900 + 5;</div><div class="line">const int INF = 0x3f3f3f3f;</div><div class="line">const int MOD = 3;</div><div class="line">int a[MAXN][MAXN];</div><div class="line">int x[MAXN];</div><div class="line"></div><div class="line">inline int gcd(int a, int b) &#123;</div><div class="line">    return b == 0 ? a : gcd(b, a % b);</div><div class="line">&#125;</div><div class="line"></div><div class="line">inline int lcm(int a, int b) &#123;</div><div class="line">    return a / gcd(a, b) * b;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll inv(ll a, ll m) &#123;</div><div class="line">    if(a == 1) return 1;</div><div class="line">    return inv(m % a, m) * (m - m / a) % m;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int Gauss(int equ, int var) &#123;</div><div class="line">    int max_r, col, k;</div><div class="line">    for (k = 0, col = 0; k &lt; equ &amp;&amp; col &lt; var; k++, col++) &#123;</div><div class="line">        max_r = k;</div><div class="line">        for (int i = k + 1; i &lt; equ; i++) &#123;</div><div class="line">            if(abs(a[i][col]) &gt; abs(a[max_r][col])) max_r = i;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        if(a[max_r][col] == 0) &#123;</div><div class="line">            // k--;</div><div class="line">            continue;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if(max_r != k) &#123;</div><div class="line">            for (int j = col; j &lt; var + 1; j++) &#123;</div><div class="line">                swap(a[k][j], a[max_r][j]);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        for (int i = k + 1; i &lt; equ; i++) &#123;</div><div class="line">            if(a[i][col] != 0) &#123;</div><div class="line">                int LCM = lcm(abs(a[i][col]), abs(a[k][col]));</div><div class="line">                int ta = LCM / abs(a[i][col]);</div><div class="line">                int tb = LCM / abs(a[k][col]);</div><div class="line">                if(a[i][col] * a[k][col] &lt; 0) tb = -tb;</div><div class="line">                for (int j = col; j &lt; var + 1; j++) &#123;</div><div class="line">                    a[i][j] = ((a[i][j] * ta - a[k][j] * tb) % MOD </div><div class="line">                            + MOD) % MOD;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // for (int i = k; i &lt; equ; i++) &#123;</div><div class="line">        // if(a[i][col] != 0) &#123;</div><div class="line">            // return -1; //无解</div><div class="line">        // &#125;</div><div class="line">    // &#125;</div><div class="line">    //if(k &lt; var) return var - k; // 多解</div><div class="line">    for (int i = var - 1; i &gt;= 0; i--) &#123;</div><div class="line">        int temp = a[i][var];</div><div class="line">        for (int j = i + 1; j &lt; var; j++) &#123;</div><div class="line">            if(a[i][j] != 0) &#123;</div><div class="line">                temp -= a[i][j] * x[j];</div><div class="line">                temp = (temp % MOD + MOD) % MOD;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if(a[i][i] == 0) x[i] = 0;</div><div class="line">        else x[i] = (temp * inv(a[i][i], MOD)) % MOD;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int N, M;</div><div class="line"></div><div class="line">void init() &#123;</div><div class="line">    memset(a, 0, sizeof(a));</div><div class="line">    for (int i = 0; i &lt; N; i++) &#123;</div><div class="line">        for (int j = 0; j &lt; M; j++) &#123;</div><div class="line">            int t = i * M + j;</div><div class="line">            if(i &gt; 0) &#123;</div><div class="line">                a[(i-1)*M + j][t] = (a[(i-1)*M + j][t] + 1) % MOD;</div><div class="line">            &#125;</div><div class="line">            a[t][t] = (a[t][t] + 2) % MOD;</div><div class="line">            if(i &lt; N - 1) &#123;</div><div class="line">                a[(i+1)*M +j][t] = (a[(i+1)*M + j][t] + 1) % MOD;</div><div class="line">            &#125;</div><div class="line">            if(j &gt; 0) &#123;</div><div class="line">                a[i*M + j - 1][t] = (a[i*M + j - 1][t] + 1) % MOD;</div><div class="line">            &#125;</div><div class="line">            if(j &lt; M - 1) &#123;</div><div class="line">                a[i*M + j + 1][t] = (a[i*M + j + 1][t] + 1) % MOD;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    while(T--) &#123;</div><div class="line">        scanf("%d%d", &amp;N, &amp;M);</div><div class="line">        init();</div><div class="line">        int equ = N * M, var = N * M;</div><div class="line">        for (int i = 0; i &lt; N; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; M; j++) &#123;</div><div class="line">                int x; scanf("%d", &amp;x);</div><div class="line">                a[i*M + j][var] = (MOD - x) % MOD;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        // for (int i = 0; i &lt; equ; i++) &#123;</div><div class="line">            // for (int j = 0; j &lt;= var; j++) &#123;</div><div class="line">                // printf("%d ", a[i][j]);</div><div class="line">            // &#125;</div><div class="line">            // puts("");</div><div class="line">        // &#125;</div><div class="line">        // puts("");</div><div class="line">        Gauss(equ, var);</div><div class="line">        // for (int i = 0; i &lt; equ; i++) &#123;</div><div class="line">            // for (int j = 0; j &lt;= var; j++) &#123;</div><div class="line">                // printf("%d ", a[i][j]);</div><div class="line">            // &#125;</div><div class="line">            // puts("");</div><div class="line">        // &#125;</div><div class="line">        // puts("");</div><div class="line">        int cnt = 0;</div><div class="line">        for (int i = 0; i &lt; var; i++) &#123;</div><div class="line">            cnt += x[i];</div><div class="line">        &#125;</div><div class="line">        printf("%d\n", cnt);</div><div class="line">        for (int i = 0; i &lt; var; i++) &#123;</div><div class="line">            for (int j = 0; j &lt; x[i]; j++) &#123;</div><div class="line">                printf("%d %d\n", i / M + 1, i % M + 1);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定一个nxm的矩阵，每个格子中有0，1，2中的一个整数。&lt;br&gt;可以对矩阵进行若干次如下操作。选定一个格子将其值+2，其上下左右四个格子分别+1。均在模3的意义下进行。求一种方案可以将矩阵清零。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;高斯消元，因为这里0元素很多，所以高斯消元复杂度并不会超。&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="简单题" scheme="http://luoxinchen.me/tags/%E7%AE%80%E5%8D%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest3-1002</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1002/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1002/</id>
    <published>2016-09-11T14:22:19.000Z</published>
    <updated>2016-09-11T14:44:40.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>签到题</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><a id="more"></a>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int n;</div><div class="line">    while(scanf("%d", &amp;n) == 1) &#123;</div><div class="line">        if(n == 1) &#123;</div><div class="line">            double x;</div><div class="line">            scanf("%lf", &amp;x);</div><div class="line">            printf("%.9f\n", x);</div><div class="line">            continue;</div><div class="line">        &#125;</div><div class="line">        double p1 = 0;</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            p1 += 1.0 * (i - 1);</div><div class="line">        &#125;</div><div class="line">        p1 /= double(n) * (n - 1);</div><div class="line">        double p2 = 0;</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            p2 += 1.0 * (i - 1) * (i - 2);</div><div class="line">        &#125;</div><div class="line">        p2 /= double(n) * (n - 1) * (n - 2);</div><div class="line">        double ans = 0;</div><div class="line">        double x;</div><div class="line">        scanf("%lf", &amp;x);</div><div class="line">        ans += x * p1;</div><div class="line">        for (int i = 2; i &lt;= n - 1; i++) &#123;</div><div class="line">            scanf("%lf", &amp;x);</div><div class="line">            ans += x * p2;</div><div class="line">        &#125;</div><div class="line">        scanf("%lf", &amp;x);</div><div class="line">        ans += x * p1;</div><div class="line">        printf("%.9f\n", ans);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;签到题&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="高斯消元" scheme="http://luoxinchen.me/tags/%E9%AB%98%E6%96%AF%E6%B6%88%E5%85%83/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest3-1001</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1001/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest3-1001/</id>
    <published>2016-09-11T14:19:12.000Z</published>
    <updated>2016-09-11T14:22:02.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>定义$f(n) = floor(sqrt(n)), f^1(n) = f(n),f^y(n)=f(f^{y-1}(n))$</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>简单题<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const int maxn = 100 + 5;</div><div class="line">char str[maxn];</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    vector&lt;ll&gt; V;</div><div class="line">    ll x = 2;</div><div class="line">    for (int i = 1; i &lt;= 6; i++) &#123;</div><div class="line">        // prln(x);</div><div class="line">        V.push_back(x);</div><div class="line">        x = x * x;</div><div class="line">    &#125;</div><div class="line">    while(scanf("%s", str) == 1) &#123;</div><div class="line">        int len = strlen(str);</div><div class="line">        if(len &gt; 12) &#123;</div><div class="line">            printf("TAT\n");</div><div class="line">        &#125; else &#123;</div><div class="line">            sscanf(str, "%lld", &amp;x);</div><div class="line">            int p = upper_bound(V.begin(), V.end(), x) - V.begin();</div><div class="line">            if(p &gt; 5 || x == 0) &#123;</div><div class="line">                printf("TAT\n");</div><div class="line">            &#125; else &#123;</div><div class="line">                printf("%d\n", p);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;定义$f(n) = floor(sqrt(n)), f^1(n) = f(n),f^y(n)=f(f^{y-1}(n))$&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;简单题&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="简单题" scheme="http://luoxinchen.me/tags/%E7%AE%80%E5%8D%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest2-1012</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1012/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1012/</id>
    <published>2016-09-11T14:14:27.000Z</published>
    <updated>2016-09-11T14:18:12.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>暴力模拟题</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>暴力模拟<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const int maxn = 1e5 + 5;</div><div class="line">const int maxm = 5e3 + 5;</div><div class="line">char s[maxn], p[maxm]; </div><div class="line">char buf[maxm];</div><div class="line">bool used[maxm];</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    while(T--) &#123;</div><div class="line">        int n, m;</div><div class="line">        scanf("%d%d", &amp;n, &amp;m);</div><div class="line">        scanf("%s%s", s, p);</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">           memcpy(buf, p, m + 1);</div><div class="line">           memset(used, false,  m + 1);</div><div class="line">           // prln("ok");</div><div class="line">           if(i + m &lt;= n) &#123;</div><div class="line">               bool ok = true;</div><div class="line">               for (int j = 0; j &lt; m - 1; j++) &#123;</div><div class="line">                   if(s[i+j] != buf[j] &amp;&amp; used[j]) &#123;</div><div class="line">                       ok = false;</div><div class="line">                       break;</div><div class="line">                   &#125; else if(s[i+j] != buf[j] &amp;&amp; !used[j]) &#123;</div><div class="line">                       if(s[i+j] == buf[j+1]) &#123;</div><div class="line">                           swap(buf[j], buf[j+1]);</div><div class="line">                           used[j+1] = true;</div><div class="line">                       &#125; else &#123;</div><div class="line">                           ok = false;</div><div class="line">                           break;</div><div class="line">                       &#125;</div><div class="line">                   &#125;</div><div class="line">               &#125;</div><div class="line">               if(s[i+m-1] != buf[m-1]) ok = false;</div><div class="line">               if(ok) printf("1");</div><div class="line">               else printf("0");</div><div class="line">           &#125; else printf("0");</div><div class="line">        &#125; </div><div class="line">        puts("");</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;暴力模拟题&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;暴力模拟&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="简单题" scheme="http://luoxinchen.me/tags/%E7%AE%80%E5%8D%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest2-1011</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1011/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1011/</id>
    <published>2016-09-11T14:11:48.000Z</published>
    <updated>2016-09-11T14:13:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定n种字符，第i种字符有ai个。求用这些字符构造一些回文串，且字符要全部用完。<br>最大化最短的回文串长度。输出该长度。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>贪心<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T;</div><div class="line">    scanf("%d", &amp;T);</div><div class="line">    while(T--) &#123;</div><div class="line">        int n;</div><div class="line">        scanf("%d", &amp;n);</div><div class="line">        int sum = 0, cnt_odd = 0;</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            int x; scanf("%d", &amp;x);</div><div class="line">            if(x % 2) &#123;</div><div class="line">                cnt_odd++;</div><div class="line">                sum += x - 1;</div><div class="line">            &#125; else &#123;</div><div class="line">                sum += x;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        if(cnt_odd == 0) &#123;</div><div class="line">            printf("%d\n", sum);</div><div class="line">        &#125; else &#123;</div><div class="line">            printf("%d\n", sum / (2 * cnt_odd) * 2 + 1);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定n种字符，第i种字符有ai个。求用这些字符构造一些回文串，且字符要全部用完。&lt;br&gt;最大化最短的回文串长度。输出该长度。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;贪心&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest2-1009</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1009/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1009/</id>
    <published>2016-09-11T14:05:28.000Z</published>
    <updated>2016-09-11T14:11:01.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定长度为n的数列A的一部分。已知A单调不增，且$A_i \in \,[0,100]$, A不是全0数列<br>$$ k = \frac{A_1 + A<em>2}{\sum</em>{i=1}^{n}A_i} $$<br>求最大的k</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>贪心一下即可<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const int maxn = 100 + 5;</div><div class="line">int A[maxn];</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T;</div><div class="line">    scanf("%d", &amp;T);</div><div class="line">    while(T--) &#123;</div><div class="line">        memset(A, -1, sizeof(A));</div><div class="line">        int n, m;</div><div class="line">        scanf("%d%d", &amp;n, &amp;m);</div><div class="line">        for (int i = 1; i &lt;= m; i++) &#123;</div><div class="line">            int x, y;</div><div class="line">            scanf("%d%d", &amp;x, &amp;y);</div><div class="line">            A[x] = y;</div><div class="line">        &#125;</div><div class="line">        int last = 100;</div><div class="line">        for (int i = 1; i &lt;= 2; i++) &#123;</div><div class="line">            if(A[i] == -1) &#123;</div><div class="line">                A[i] = last;</div><div class="line">            &#125;</div><div class="line">            last = A[i];</div><div class="line">        &#125;</div><div class="line">        last = 0;</div><div class="line">        for (int i = n; i &gt;= 3; i--) &#123;</div><div class="line">            if(A[i] == -1) &#123;</div><div class="line">                A[i] = last;</div><div class="line">            &#125; </div><div class="line">            last = A[i];</div><div class="line">        &#125;</div><div class="line">        int p = A[1] + A[2], q = 0;</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            q += A[i];</div><div class="line">        &#125;</div><div class="line">        int g = __gcd(p, q);</div><div class="line">        p /= g; q /= g;</div><div class="line">        printf("%d/%d\n", p, q);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定长度为n的数列A的一部分。已知A单调不增，且$A_i \in \,[0,100]$, A不是全0数列&lt;br&gt;$$ k = \frac{A_1 + A&lt;em&gt;2}{\sum&lt;/em&gt;{i=1}^{n}A_i} $$&lt;br&gt;求最大的k&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;贪心一下即可&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest2-1008</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1008/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1008/</id>
    <published>2016-09-11T13:55:33.000Z</published>
    <updated>2016-09-11T14:05:03.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定一个长度为n的01串，m个询问，询问是否存在一个子串，恰好有a个0和b个1.</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>预处理出可行的区间，即对于a属于[l1,r1],b属于[l2,r2]中都是符合条件的，可以发现其刚好对应二维坐标系中的一个矩形，所以可以n^2处理出n^2个这样的矩形。问题等价于(ai,bi)是否位于某个矩形内部，然后可以发现这题很像矩形面积并，我们可以对(ai,bi)按照ai排序，然后用扫描线+线段树处理，这里线段树会超时，换成bit维护线段上一点是否被区间覆盖即可。这题正解是正交凸包+二分，实在想不到。<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">//const int inf = 0x3f3f3f3f;</div><div class="line">const int maxn = 1000 + 5;</div><div class="line">const int maxm = 5e5 + 5;</div><div class="line">struct Bit &#123;</div><div class="line">    int bit[maxn * maxn * 2 + 100];</div><div class="line">    int n;</div><div class="line">    void init(int n) &#123;</div><div class="line">        this-&gt;n = n;</div><div class="line">        for (int i = 0; i &lt;= n; i++) &#123;</div><div class="line">            bit[i] = 0;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    void add(int i, int x) &#123;</div><div class="line">        for (; i &lt;= n; i += lowbit(i)) &#123;</div><div class="line">            bit[i] += x;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    int sum(int i) &#123;</div><div class="line">        int res = 0;</div><div class="line">        for (; i &gt; 0; i -= lowbit(i)) &#123;</div><div class="line">            res += bit[i];</div><div class="line">        &#125;</div><div class="line">        return res;</div><div class="line">    &#125;</div><div class="line">&#125;bit;</div><div class="line"></div><div class="line">struct Seg &#123;</div><div class="line">    int l1, r1, l2, r2;</div><div class="line">    Seg() &#123;&#125;</div><div class="line">    Seg(int l1, int r1, int l2, int r2):l1(l1), r1(r1), l2(l2), r2(r2)&#123;&#125;</div><div class="line">&#125;segs[maxn*maxn*2], buf[maxn*maxn*2];</div><div class="line"></div><div class="line">int cnt_buf;</div><div class="line">int V[maxn * maxn * 2 + 100], cnt_v;</div><div class="line">int A[maxn];</div><div class="line">int ans[maxm];</div><div class="line">int n, m;</div><div class="line">int cnt_segs;</div><div class="line">pair&lt;pii, int&gt; query[maxm];</div><div class="line"></div><div class="line">int id(int x) &#123;</div><div class="line">    return lower_bound(V, V + cnt_v, x) - V + 1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">bool seg_cmp(const Seg &amp;a, const Seg &amp;b) &#123;</div><div class="line">    return a.l1 &lt; b.l1;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void add_seg(int l1, int r1, int l2, int r2) &#123;</div><div class="line">    segs[cnt_segs++] = Seg(l1, r1, l2, r2);</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">void pre_work() &#123;</div><div class="line">    cnt_v = 0;</div><div class="line">    cnt_buf = 0;</div><div class="line">    cnt_segs = 0;</div><div class="line">    for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">        if(i % 2 == 0) &#123;</div><div class="line">            add_seg(1, A[i], 0, 0);</div><div class="line">        &#125; else &#123;</div><div class="line">            add_seg(0, 0, 1, A[i]);</div><div class="line">        &#125;</div><div class="line">        int cnt[2] = &#123;0, 0&#125;;</div><div class="line">        int l[2], r[2];</div><div class="line">        for (int j = i + 1; j &lt; n; j++) &#123;</div><div class="line">            l[0] = r[0] = cnt[0];</div><div class="line">            l[1] = r[1] = cnt[1];</div><div class="line">            l[j % 2] += 1;</div><div class="line">            r[j % 2] += A[j];</div><div class="line">            l[i % 2] += 1;</div><div class="line">            r[i % 2] += A[i];</div><div class="line">            add_seg(l[0], r[0], l[1], r[1]);</div><div class="line">            cnt[j % 2] += A[j];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    for (int i = 0; i &lt; cnt_segs; i++) &#123;</div><div class="line">        int &amp;l1 = segs[i].l1, &amp;l2 = segs[i].l2;</div><div class="line">        int &amp;r1 = segs[i].r1, &amp;r2 = segs[i].r2;</div><div class="line">        // printf("%d %d %d %d\n", l1, r1, l2, r2);</div><div class="line">        buf[cnt_buf++] = Seg(l1, 1, l2, r2);</div><div class="line">        buf[cnt_buf++] = Seg(r1 + 1, -1, l2, r2);</div><div class="line">        // V[cnt_v++] = segs[i].l2;</div><div class="line">        V[cnt_v++] = segs[i].l2;</div><div class="line">        // V[cnt_v++] = segs[i].r2;</div><div class="line">        V[cnt_v++] = segs[i].r2 + 1;</div><div class="line">    &#125;</div><div class="line">    for (int i = 0; i &lt; m; i++) &#123;</div><div class="line">        V[cnt_v++] = query[i].xx.yy;</div><div class="line">    &#125;</div><div class="line">    sort(V, V + cnt_v);</div><div class="line">    cnt_v = unique(V, V + cnt_v) - V; </div><div class="line">    // prln("ok");</div><div class="line">&#125;</div><div class="line"></div><div class="line">void solve() &#123;</div><div class="line">    sort(query, query + m);</div><div class="line">    sort(buf, buf + cnt_buf, seg_cmp);</div><div class="line">    bit.init(cnt_v + 2);</div><div class="line">    for (int i = 0, j = 0; i &lt; m; i++) &#123;</div><div class="line">        int a = query[i].xx.xx, b = query[i].xx.yy;</div><div class="line">        // prln(a);</div><div class="line">        while(j &lt; cnt_buf &amp;&amp; buf[j].l1 &lt;= a) &#123;</div><div class="line">            bit.add(id(buf[j].l2), buf[j].r1);</div><div class="line">            bit.add(id(buf[j].r2) + 1, -buf[j].r1);</div><div class="line">            // printf("%d %d %d %d\n", buf[j].l1, buf[j].r1, buf[j].l2,</div><div class="line">            //buf[j].r2);</div><div class="line">            j++;</div><div class="line">        &#125;</div><div class="line">        if(bit.sum(id(b)) &gt; 0) &#123;</div><div class="line">            ans[query[i].yy] = 1;</div><div class="line">        &#125; else &#123;</div><div class="line">            ans[query[i].yy] = 0;</div><div class="line">        &#125;</div><div class="line">        // prln(ans[query[i].yy]);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main() &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    freopen("1008.in", "r", stdin);</div><div class="line">    freopen("1008.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    while(T--) &#123;</div><div class="line">        scanf("%d%d", &amp;n, &amp;m);</div><div class="line">        // pr(n); prln(m);</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            scanf("%d", &amp;A[i]);</div><div class="line">        &#125;</div><div class="line">        for (int i = 0; i &lt; m; i++) &#123;</div><div class="line">            scanf("%d%d", &amp;query[i].xx.xx, &amp;query[i].xx.yy);</div><div class="line">            query[i].yy = i;</div><div class="line">        &#125;</div><div class="line">        pre_work();</div><div class="line">        solve();</div><div class="line">        for (int i = 0; i &lt; m; i++) &#123;</div><div class="line">            printf("%d", ans[i]);</div><div class="line">        &#125;</div><div class="line">        puts("");</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定一个长度为n的01串，m个询问，询问是否存在一个子串，恰好有a个0和b个1.&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;预处理出可行的区间，即对于a属于[l1,r1],b属于[l2,r2]中都是符合条件的，可以发现其刚好对应二维坐标系中的一个矩形，所以可以n^2处理出n^2个这样的矩形。问题等价于(ai,bi)是否位于某个矩形内部，然后可以发现这题很像矩形面积并，我们可以对(ai,bi)按照ai排序，然后用扫描线+线段树处理，这里线段树会超时，换成bit维护线段上一点是否被区间覆盖即可。这题正解是正交凸包+二分，实在想不到。&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="正交凸包" scheme="http://luoxinchen.me/tags/%E6%AD%A3%E4%BA%A4%E5%87%B8%E5%8C%85/"/>
    
      <category term="扫描线" scheme="http://luoxinchen.me/tags/%E6%89%AB%E6%8F%8F%E7%BA%BF/"/>
    
      <category term="bit" scheme="http://luoxinchen.me/tags/bit/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest2-1006</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1006/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1006/</id>
    <published>2016-09-11T13:45:31.000Z</published>
    <updated>2016-09-11T13:54:11.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定n个点m条边的带权无向图G。定义Gi是从G中删除点i得到的图。<br>定义一个图G的权值如下：</p>
<ol>
<li>如果图联通，权值为所有点权的乘积。</li>
<li>如果图不连通，权值为所有连通块权值和。<br>对于1&lt;=i&lt;=n,求出Gi的权值</li>
</ol>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>可以先预处理出原图的权值，对于点i，如果点i不为割点，那么去除点i就是对应联通块的权值除上点i的权值，如果点i为割点，则可以发现它讲图分裂几个部分，其实就是对应图dfs树的祖先和几个子树，所以dfs预处理出每棵子树的权值，然后树形dp转移，注意考虑只有1个点，和根节点时的特殊情况。</p>
<a id="more"></a>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const ll mod = 1e9 + 7;</div><div class="line"></div><div class="line">inline ll fast_pow(ll x, ll n) &#123;</div><div class="line">    ll res = 1;</div><div class="line">    while(n &gt; 0) &#123;</div><div class="line">        if(n &amp; 1) res = (res * x) % mod;</div><div class="line">        n &gt;&gt;= 1;</div><div class="line">        x = (x * x) % mod;</div><div class="line">    &#125;</div><div class="line">    return res;</div><div class="line">&#125;</div><div class="line"></div><div class="line">inline ll inv(ll x) &#123;</div><div class="line">    return fast_pow(x, mod - 2);</div><div class="line">&#125;</div><div class="line"></div><div class="line">const int maxn = 1e5 + 5;</div><div class="line">const int maxm = 4e5 + 5;</div><div class="line">struct Edge &#123;</div><div class="line">    int to, nxt;</div><div class="line">    Edge() &#123;&#125;;</div><div class="line">&#125;edge[maxm];</div><div class="line">int head[maxn], tot;</div><div class="line">int n, m;</div><div class="line"></div><div class="line">void init() &#123;</div><div class="line">    tot = 0;</div><div class="line">    memset(head, -1, sizeof(int) * (n + 1));</div><div class="line">&#125;</div><div class="line">void add_edge(int u, int v) &#123;</div><div class="line">    edge[tot].to = v;</div><div class="line">    edge[tot].nxt = head[u];</div><div class="line">    head[u] = tot++;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int DFN[maxn], Low[maxn], dfsNum;</div><div class="line">int w[maxn];</div><div class="line">int rt[maxn], cnt_rt;</div><div class="line">bool vised[maxn];</div><div class="line">ll val[maxn];</div><div class="line">ll ans[maxn];</div><div class="line">ll Sum;</div><div class="line">void dfs(int u) &#123;</div><div class="line">    val[u] = w[u];</div><div class="line">    vised[u] = true;</div><div class="line">    for (int i = head[u]; ~i; i = edge[i].nxt) &#123;</div><div class="line">        int v = edge[i].to;</div><div class="line">        if(vised[v]) continue;</div><div class="line">        dfs(v);</div><div class="line">        val[u] = val[u] * val[v] % mod;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll tarjan(int u, int fa, int root) &#123;</div><div class="line">    // pr(u); prln(fa);</div><div class="line">    ll res = w[u], sum = 0, rest = w[u];</div><div class="line">    DFN[u] = Low[u] = ++dfsNum;</div><div class="line">    int cnt_child = 0;</div><div class="line">    bool is_cut = false;</div><div class="line">    for (int i = head[u]; ~i; i = edge[i].nxt) &#123;</div><div class="line">        int v = edge[i].to;</div><div class="line">        if(DFN[v] == -1) &#123;</div><div class="line">            cnt_child++;</div><div class="line">            ll tmp = tarjan(v, u, root);</div><div class="line">            res = (res * tmp) % mod;</div><div class="line">            Low[u] = min(Low[v], Low[u]);</div><div class="line">            if(fa == -1) &#123;</div><div class="line">                sum = (sum + tmp) % mod;</div><div class="line">            &#125;</div><div class="line">            if(fa == -1 &amp;&amp; cnt_child &gt; 1) &#123;</div><div class="line">                is_cut = true;</div><div class="line">            &#125;</div><div class="line">            if(fa != -1 &amp;&amp; Low[v] &gt;= DFN[u]) &#123;</div><div class="line">                is_cut = true;</div><div class="line">                rest = (rest * tmp) % mod;</div><div class="line">                sum = (sum + tmp) % mod;</div><div class="line">            &#125;</div><div class="line">        &#125; else &#123;</div><div class="line">            Low[u] = min(Low[u], DFN[v]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    if(!is_cut) &#123;</div><div class="line">        // 孤立点</div><div class="line">        if(fa == -1 &amp;&amp; cnt_child == 0) &#123;</div><div class="line">            ans[u] = (Sum - w[u] + mod) % mod;</div><div class="line">        &#125; else &#123;</div><div class="line">            ans[u] = ((Sum - val[root] + mod) % mod + </div><div class="line">                    val[root] * inv(rest) % mod) % mod;</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        ll val_fa = val[root] * inv(rest) % mod;</div><div class="line">        // prln(sum);</div><div class="line">        if(fa != -1) &#123;</div><div class="line">            sum = (sum + val_fa) % mod;</div><div class="line">        &#125;</div><div class="line">        ans[u] = ((Sum - val[root] + mod) % mod + sum) % mod;</div><div class="line">    &#125;</div><div class="line">    // prln(res);</div><div class="line">    return res;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T;</div><div class="line">    scanf("%d", &amp;T);</div><div class="line">    while(T--) &#123;</div><div class="line">        scanf("%d%d", &amp;n, &amp;m);</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            scanf("%d", &amp;w[i]);</div><div class="line">        &#125;</div><div class="line">        init();</div><div class="line">        for (int i = 1; i &lt;= m; i++) &#123;</div><div class="line">            int u, v;</div><div class="line">            scanf("%d%d", &amp;u, &amp;v);</div><div class="line">            add_edge(u, v);</div><div class="line">            add_edge(v, u);</div><div class="line">        &#125;</div><div class="line">        memset(vised, 0, sizeof(int) * (n + 1));</div><div class="line">        cnt_rt = 0;</div><div class="line">        Sum = 0;</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            if(!vised[i]) &#123;</div><div class="line">                rt[cnt_rt++] = i;</div><div class="line">                dfs(i);</div><div class="line">                Sum = (Sum + val[i]) % mod;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        memset(DFN, -1, sizeof(int) * (n + 1));</div><div class="line">        dfsNum = 0;</div><div class="line">        for (int i = 0; i &lt; cnt_rt; i++) &#123;</div><div class="line">            int u = rt[i];</div><div class="line">            // prln(u);</div><div class="line">            tarjan(u, -1, u);</div><div class="line">        &#125;</div><div class="line">        ll res = 0;</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            // prln(ans[i]);</div><div class="line">            res = (res + ans[i] * i) % mod;</div><div class="line">        &#125;</div><div class="line">        printf("%lld\n", res);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定n个点m条边的带权无向图G。定义Gi是从G中删除点i得到的图。&lt;br&gt;定义一个图G的权值如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;如果图联通，权值为所有点权的乘积。&lt;/li&gt;
&lt;li&gt;如果图不连通，权值为所有连通块权值和。&lt;br&gt;对于1&amp;lt;=i&amp;lt;=n,求出Gi的权值&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;可以先预处理出原图的权值，对于点i，如果点i不为割点，那么去除点i就是对应联通块的权值除上点i的权值，如果点i为割点，则可以发现它讲图分裂几个部分，其实就是对应图dfs树的祖先和几个子树，所以dfs预处理出每棵子树的权值，然后树形dp转移，注意考虑只有1个点，和根节点时的特殊情况。&lt;/p&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="图论" scheme="http://luoxinchen.me/tags/%E5%9B%BE%E8%AE%BA/"/>
    
      <category term="树形dp" scheme="http://luoxinchen.me/tags/%E6%A0%91%E5%BD%A2dp/"/>
    
      <category term="tarjan" scheme="http://luoxinchen.me/tags/tarjan/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest2-1005</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1005/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1005/</id>
    <published>2016-09-11T13:42:00.000Z</published>
    <updated>2016-09-11T13:45:21.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定平面上n个点的坐标，求有多少点集，满足集合中所有点都在一条直线上。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>从1到n，枚举一个点，然后按照共线划分等价类搞搞就行，注意点重合的情况。<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt; </div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">const ll MOD = 1e9 + 7;</div><div class="line">const double inf = 1e15;</div><div class="line">ll gcd(ll a, ll b) &#123;</div><div class="line">    return b == 0 ? a : gcd(b, a % b);</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll mod_pow(ll x, ll n, ll mod) &#123;</div><div class="line">    ll res = 1;</div><div class="line">    while(n &gt; 0) &#123;</div><div class="line">        if(n &amp; 1) &#123;</div><div class="line">            res = (res * x) % mod;</div><div class="line">        &#125;</div><div class="line">        n &gt;&gt;= 1;</div><div class="line">        x = (x * x) % mod;</div><div class="line">    &#125;</div><div class="line">    return res;</div><div class="line">&#125;</div><div class="line"></div><div class="line">const int maxn = 1000 + 5;</div><div class="line">struct Point &#123;</div><div class="line">    ll x, y;</div><div class="line">    double k;</div><div class="line">    Point() &#123;&#125;</div><div class="line">    Point(ll x, ll y): x(x), y(y) &#123;&#125;</div><div class="line"></div><div class="line">    Point operator - (const Point &amp;b) const &#123;</div><div class="line">        return Point(x - b.x, y - b.y);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    void read() &#123;</div><div class="line">        scanf("%lld%lld", &amp;x, &amp;y);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line"></div><div class="line">    void get_k() &#123;</div><div class="line">        if(x != 0) &#123;</div><div class="line">            ll g = gcd(x, y);</div><div class="line">            ll a = y / g, b = x / g;</div><div class="line">            k = double(a) / b;</div><div class="line">        &#125; else &#123;</div><div class="line">            k = inf;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;ps[maxn];</div><div class="line">int n;</div><div class="line"></div><div class="line">bool cmp(const Point &amp;a, const Point &amp;b) &#123;</div><div class="line">    return a.k &lt; b.k;</div><div class="line">&#125;</div><div class="line"></div><div class="line">Point buf[maxn];</div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    int T; scanf("%d", &amp;T);</div><div class="line">    while(T--) &#123;</div><div class="line">        scanf("%d", &amp;n);</div><div class="line">        for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">            ps[i].read();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        ll ans = 0;</div><div class="line">        for (int i = 0; i &lt; n - 1; i++) &#123;</div><div class="line">            int cnt = 0;</div><div class="line">            int same = 0;</div><div class="line">            for (int j = i + 1; j &lt; n; j++) &#123;</div><div class="line">                Point t = ps[j] - ps[i];</div><div class="line">                if(t.x == 0 &amp;&amp; t.y == 0) &#123;</div><div class="line">                    same++;</div><div class="line">                    continue;</div><div class="line">                &#125;</div><div class="line">                buf[cnt] = t;</div><div class="line">                buf[cnt].get_k();</div><div class="line">                // prln(buf[cnt].k);</div><div class="line">                cnt++;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            ll cnt_same = mod_pow(2, same, MOD);</div><div class="line">            sort(buf, buf + cnt, cmp);</div><div class="line">            int tmp = 1;</div><div class="line">            for (int j = 1; j &lt; cnt; j++) &#123;</div><div class="line">                if(buf[j].k == buf[j-1].k) &#123;</div><div class="line">                    tmp++;</div><div class="line">                &#125; else &#123;</div><div class="line">                    ans = (ans + (mod_pow(2, tmp, MOD) - 1) * cnt_same) % MOD;</div><div class="line">                    // prln(ans);</div><div class="line">                    tmp = 1;</div><div class="line">                    // prln(tmp);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            // prln(cnt);</div><div class="line">            // prln(tmp);</div><div class="line">            if(cnt &gt; 0) ans = (ans + (mod_pow(2, tmp, MOD) - 1) * cnt_same) % MOD;</div><div class="line">            ans = (ans + (cnt_same - 1) + MOD) % MOD;</div><div class="line">            // prln(ans);</div><div class="line">        &#125;</div><div class="line">        printf("%lld\n", ans);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定平面上n个点的坐标，求有多少点集，满足集合中所有点都在一条直线上。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;从1到n，枚举一个点，然后按照共线划分等价类搞搞就行，注意点重合的情况。&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="计算几何" scheme="http://luoxinchen.me/tags/%E8%AE%A1%E7%AE%97%E5%87%A0%E4%BD%95/"/>
    
      <category term="计数" scheme="http://luoxinchen.me/tags/%E8%AE%A1%E6%95%B0/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest2-1002</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1002/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest2-1002/</id>
    <published>2016-09-11T13:33:57.000Z</published>
    <updated>2016-09-11T13:41:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给定n个点的带权有根树，点i的权值为$W_i$，对于某点s，定义f(s) 为，选择一个点序$v_1,v_2,…,v_m$，要求$v_1 = s$, $v<em>i$是$v</em>{i-1}$的祖先。<br>$$ f(s) = W_{v<em>1} + \sum</em>{i=2}^{m}{W_{v<em>i} \, opt \, W</em>{v_{i-1}}} $$</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>二进制分块暴力</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdlib&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></div><div class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></div><div class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;</div><div class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = (<span class="number">1</span>&lt;&lt;<span class="number">16</span>) + <span class="number">100</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxm = (<span class="number">1</span>&lt;&lt;<span class="number">8</span>);</div><div class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</div><div class="line"><span class="keyword">const</span> ll inff = <span class="number">0x3f3f3f3f3f3f</span>LL;</div><div class="line">ll ds[maxm][maxm];</div><div class="line"><span class="keyword">int</span> A[maxn];</div><div class="line"><span class="keyword">char</span> opt[<span class="number">20</span>];</div><div class="line"><span class="keyword">int</span> OP;</div><div class="line"><span class="keyword">int</span> n;</div><div class="line">ll f[maxn];</div><div class="line"></div><div class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">op</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span>(OP == <span class="number">1</span>) <span class="keyword">return</span> a &amp; b;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(OP == <span class="number">2</span>) <span class="keyword">return</span> a ^ b;</div><div class="line">    <span class="keyword">else</span> <span class="keyword">return</span> a | b;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u)</span> </span>&#123;</div><div class="line">    ll ma = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> low_8 = A[u] &amp; ((<span class="number">1</span>&lt;&lt;<span class="number">8</span>)<span class="number">-1</span>);</div><div class="line">    <span class="keyword">int</span> high_8 = A[u] &gt;&gt; <span class="number">8</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> h = <span class="number">0</span>; h &lt; (<span class="number">1</span>&lt;&lt;<span class="number">8</span>); h++) &#123;</div><div class="line">        ma = max(ma, (op(high_8, h) &lt;&lt; <span class="number">8</span>) + ds[h][low_8]);</div><div class="line">    &#125;</div><div class="line">    f[u] = ma;</div><div class="line">    ll *buf = <span class="keyword">new</span> ll[maxm];</div><div class="line">    <span class="built_in">memcpy</span>(buf, ds[high_8], <span class="keyword">sizeof</span>(ll) * maxm);</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>; l &lt; (<span class="number">1</span>&lt;&lt;<span class="number">8</span>); l++) &#123;</div><div class="line">        ds[high_8][l] = max(ds[high_8][l], f[u] + op(l, low_8));</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; (<span class="keyword">int</span>)G[u].size(); i++) &#123;</div><div class="line">        <span class="keyword">int</span> v = G[u][i];</div><div class="line">        dfs(v);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">memcpy</span>(ds[high_8], buf, <span class="keyword">sizeof</span>(ll) * maxm);</div><div class="line">    <span class="keyword">delete</span>[] buf;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> T;</div><div class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</div><div class="line">    <span class="keyword">while</span>(T--) &#123;</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</div><div class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, opt);</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(opt, <span class="string">"AND"</span>) == <span class="number">0</span>) OP = <span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(opt, <span class="string">"XOR"</span>) == <span class="number">0</span>) OP = <span class="number">2</span>;</div><div class="line">        <span class="keyword">if</span>(<span class="built_in">strcmp</span>(opt, <span class="string">"OR"</span>) == <span class="number">0</span>) OP = <span class="number">3</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;A[i]);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++) &#123;</div><div class="line">            G[i].clear();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</div><div class="line">            <span class="keyword">int</span> fa;<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;fa);</div><div class="line">            G[fa].push_back(i);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxm; i++) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; maxm; j++) &#123;</div><div class="line">                ds[i][j] = -inf;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span>(f));</div><div class="line">        dfs(<span class="number">1</span>);</div><div class="line">        ll ans = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++) &#123;</div><div class="line">           ans = (ans + ((ll)f[i] + A[i]) * i % mod) % mod; </div><div class="line">        &#125;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给定n个点的带权有根树，点i的权值为$W_i$，对于某点s，定义f(s) 为，选择一个点序$v_1,v_2,…,v_m$，要求$v_1 = 
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="博弈" scheme="http://luoxinchen.me/tags/%E5%8D%9A%E5%BC%88/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest1-1011</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest1-1011/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest1-1011/</id>
    <published>2016-09-11T13:27:26.000Z</published>
    <updated>2016-09-11T13:29:52.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给出三维空间中的四个点，若它们能构成四面体，输出其内切球心。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>公式题，没啥意思。</p>
<a id="more"></a>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">typedef long double ld;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line">const double eps = 1e-9;</div><div class="line"></div><div class="line">int sign(ld x) &#123;</div><div class="line">    if(x &lt; -eps) &#123;</div><div class="line">        return -1;</div><div class="line">    &#125; else if(x &gt; eps) &#123;</div><div class="line">        return 1;</div><div class="line">    &#125; else return 0;</div><div class="line">&#125;</div><div class="line"></div><div class="line">struct Point3 &#123;</div><div class="line">    ld x, y, z;</div><div class="line">    Point3() &#123;&#125;</div><div class="line">    Point3(ld x, ld y, ld z): x(x), y(y), z(z) &#123;&#125;</div><div class="line">    Point3 operator - (const Point3 &amp;b) const &#123;</div><div class="line">        return Point3(x - b.x, y - b.y, z - b.z);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    Point3 operator + (const Point3 &amp;b) const &#123;</div><div class="line">        return Point3(x + b.x, y + b.y, z + b.z);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    ld dot(const Point3 &amp;b) const &#123;</div><div class="line">        return x * b.x + y * b.y + z * b.z;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Point3 cross(const Point3 &amp;b) const &#123;</div><div class="line">        return Point3(y * b.z - z * b.y, z * b.x - x * b.z, x * b.y - y * b.x);</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">typedef Point3 Vector3;</div><div class="line"></div><div class="line"></div><div class="line">ld sqr(ld x) &#123;</div><div class="line">    return x * x;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ld dist(const Point3 &amp;a, const Point3 &amp;b) &#123;</div><div class="line">    return sqrt((b - a).dot(b - a));</div><div class="line">&#125;;</div><div class="line"></div><div class="line">ld Area2(Point3 A, Point3 B, Point3 C) &#123;</div><div class="line">    ld a = dist(B, C), b = dist(A, C), c = dist(A, B);</div><div class="line">    ld s = (a + b + c) / 2;</div><div class="line">    return sqrt(s*(s-a)*(s-b)*(s-c));</div><div class="line">&#125;</div><div class="line"></div><div class="line">ld Volume6(Point3 A, Point3 B, Point3 C, Point3 D) &#123;</div><div class="line">    return (D-A).dot((B-A).cross(C-A));</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif </div><div class="line">    double x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4;</div><div class="line">    while(cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; z1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; z2 &gt;&gt; x3 &gt;&gt; y3 &gt;&gt; z3 &gt;&gt;</div><div class="line">            x4 &gt;&gt; y4 &gt;&gt; z4) &#123;</div><div class="line">        Point3 A(x1, y1, z1), B(x2, y2, z2), C(x3, y3, z3), D(x4, y4, z4);</div><div class="line">        ld s1 = Area2(B, C, D);</div><div class="line">        ld s2 = Area2(A, C, D);</div><div class="line">        ld s3 = Area2(A, B, D);</div><div class="line">        ld s4 = Area2(B, C, A);</div><div class="line">        if(s1 == 0 || s2 == 0 || s3 == 0 || s4 == 0) &#123;</div><div class="line">            puts("O O O O");</div><div class="line">            continue;</div><div class="line">        &#125;</div><div class="line">        double x, y, z, r;</div><div class="line">        ld t = s1 + s2 + s3 + s4;</div><div class="line">        x = (s1 * x1  + s2 * x2 + s3 * x3 + s4 * x4) / t;</div><div class="line">        y = (s1 * y1  + s2 * y2 + s3 * y3 + s4 * y4) / t;</div><div class="line">        z = (s1 * z1  + s2 * z2 + s3 * z3 + s4 * z4) / t;</div><div class="line">        r = abs(Volume6(A, B, C, D))/2/t;</div><div class="line">        if(r == 0) &#123;</div><div class="line">            puts("O O O O");</div><div class="line">        &#125; else &#123;</div><div class="line">            printf("%.4f %.4f %.4f %.4f\n", x, y, z, r);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;给出三维空间中的四个点，若它们能构成四面体，输出其内切球心。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;公式题，没啥意思。&lt;/p&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="数学" scheme="http://luoxinchen.me/tags/%E6%95%B0%E5%AD%A6/"/>
    
  </entry>
  
  <entry>
    <title>2016-Multi-University-Traning-Contest1-1009</title>
    <link href="http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest1-1009/"/>
    <id>http://luoxinchen.me/2016/09/11/2016-Multi-University-Traning-Contest1-1009/</id>
    <published>2016-09-11T13:24:16.000Z</published>
    <updated>2016-09-11T13:26:57.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>n*m的棋盘，有多少种1x2骨牌的完美覆盖，满足棋盘上不会有完整的直线。</p>
<h2 id="做法"><a href="#做法" class="headerlink" title="做法"></a>做法</h2><p>插头dp，然后2^m容斥行，m^2容斥列。<br><a id="more"></a></p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div></pre></td><td class="code"><pre><div class="line">/************************************************</div><div class="line"> *Author        :mathon</div><div class="line"> *Email         :luoxinchen96@gmail.com</div><div class="line">*************************************************/</div><div class="line">#include &lt;cstdio&gt;</div><div class="line">#include &lt;cstring&gt;</div><div class="line">#include &lt;iostream&gt;</div><div class="line">#include &lt;algorithm&gt;</div><div class="line">#include &lt;vector&gt;</div><div class="line">#include &lt;queue&gt;</div><div class="line">#include &lt;set&gt;</div><div class="line">#include &lt;map&gt;</div><div class="line">#include &lt;string&gt;</div><div class="line">#include &lt;cmath&gt;</div><div class="line">#include &lt;cstdlib&gt;</div><div class="line">#include &lt;ctime&gt;</div><div class="line">#include &lt;stack&gt;</div><div class="line">using namespace std;</div><div class="line">typedef pair&lt;int, int&gt; pii;</div><div class="line">typedef long long ll;</div><div class="line">typedef unsigned long long ull;</div><div class="line">#define xx first</div><div class="line">#define lowbit(x) (x&amp;-x)</div><div class="line">#define yy second</div><div class="line">#define pr(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; " "</div><div class="line">#define prln(x) cout &lt;&lt; #x &lt;&lt; " " &lt;&lt; x &lt;&lt; endl</div><div class="line"></div><div class="line">const int mod = 1e9 + 7;</div><div class="line">const int maxn = 16;</div><div class="line">ll d[maxn + 5][maxn + 5], dp[2][(1&lt;&lt;maxn) + 100];</div><div class="line">ll memo[maxn + 5][maxn + 5];</div><div class="line"></div><div class="line">void update(int a, int b, int m, int cur) &#123;</div><div class="line">    if((b &gt;&gt; m) &amp; 1) &#123;</div><div class="line">        dp[cur][b ^ (1 &lt;&lt; m)] = (dp[cur][b ^ (1 &lt;&lt; m)] + </div><div class="line">                dp[cur ^ 1][a]) % mod;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">void init() &#123;</div><div class="line">    // for (int n = 1; n &lt;= maxn; n++) &#123;</div><div class="line">        int n = 16;</div><div class="line">        for (int m = 1; m &lt;= maxn; m++) &#123;</div><div class="line">            int cur = 0;</div><div class="line">            memset(dp[cur], 0, sizeof(dp[cur]));</div><div class="line">            dp[0][(1&lt;&lt;m) - 1] = 1;</div><div class="line">            for (int i = 0; i &lt; n; i++) &#123;</div><div class="line">                for (int j = 0; j &lt; m; j++) &#123;</div><div class="line">                    cur ^= 1;</div><div class="line">                    memset(dp[cur], 0, sizeof(dp[cur]));</div><div class="line">                    for (int  k = 0; k &lt; (1&lt;&lt;m); k++) &#123;</div><div class="line">                        update(k, k &lt;&lt; 1, m, cur);</div><div class="line">                        if(i &amp;&amp; !((k &gt;&gt; (m-1)) &amp; 1)) &#123;</div><div class="line">                            update(k, (k &lt;&lt; 1) ^ (1 &lt;&lt; m) ^ 1, m, cur);</div><div class="line">                        &#125;</div><div class="line">                        if(j &amp;&amp; !(k &amp; 1)) &#123;</div><div class="line">                            update(k, (k &lt;&lt; 1) ^ 3, m, cur);</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                    if(j == m - 1) &#123;</div><div class="line">                        d[i + 1][m] = dp[cur][(1&lt;&lt;m)-1];</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            // d[n][m] = dp[cur][(1&lt;&lt;m)-1];</div><div class="line">            // pr(n); pr(m);</div><div class="line">            // prln(d[n][m]);</div><div class="line">        &#125;</div><div class="line">    // &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ll cal(int n, int m) &#123;</div><div class="line">    if(memo[n][m] != -1) return memo[n][m];</div><div class="line">    ll ans = 0;</div><div class="line">    for (int mask = 0; mask &lt; (1&lt;&lt;(m-1)); mask++) &#123;</div><div class="line">        // prln(mask);</div><div class="line">        int last = -1;</div><div class="line">        vector&lt;int&gt; w;</div><div class="line">        for (int i = 0; i &lt; m - 1; i++) &#123;</div><div class="line">            if((mask &gt;&gt; i) &amp; 1) &#123;</div><div class="line">                w.push_back(i - last);</div><div class="line">                last = i;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        w.push_back(m - 1 - last);</div><div class="line">        ll g[maxn + 1];</div><div class="line">        for (int i = 1; i &lt;= n;  i++) &#123;</div><div class="line">            ll tmp = 1;</div><div class="line">            for (int j = 0; j &lt; (int)w.size(); j++) &#123;</div><div class="line">                // pr(i); prln(w[j]);</div><div class="line">                tmp = tmp * d[i][w[j]] % mod;</div><div class="line">                // pr(d[i][w[j]]);</div><div class="line">                // prln(tmp);</div><div class="line">            &#125;</div><div class="line">            g[i] = tmp;</div><div class="line">            // printf("i = %d, g[i] = %lld\n", i, g[i]);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        ll f[maxn + 1];</div><div class="line">        for (int i = 1; i &lt;= n; i++) &#123;</div><div class="line">            f[i] = g[i];</div><div class="line">            for (int j = 1; j &lt; i; j++) &#123;</div><div class="line">                f[i] = (f[i] - f[j] * g[i - j] % mod + mod) % mod;</div><div class="line">            &#125;</div><div class="line">            // pr(i); prln(f[i]);</div><div class="line">        &#125;</div><div class="line">        if(__builtin_popcount(mask) &amp; 1) &#123;</div><div class="line">            ans = (ans - f[n] + mod) % mod;</div><div class="line">        &#125; else &#123;</div><div class="line">            ans = (ans + f[n] + mod) % mod;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return memo[n][m] = ans;</div><div class="line">&#125;</div><div class="line"></div><div class="line">int main(void) &#123;</div><div class="line">#ifdef MATHON</div><div class="line">    //freopen("in.txt", "r", stdin);</div><div class="line">    //freopen("out.txt", "w", stdout);</div><div class="line">#endif</div><div class="line">    memset(memo, -1, sizeof(memo));</div><div class="line">    init();</div><div class="line">    int n, m;</div><div class="line">    while(scanf("%d%d", &amp;n, &amp;m) == 2) &#123;</div><div class="line">        ll ans = cal(n, m);</div><div class="line">        printf("%lld\n", ans);</div><div class="line">    &#125;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;题意&quot;&gt;&lt;a href=&quot;#题意&quot; class=&quot;headerlink&quot; title=&quot;题意&quot;&gt;&lt;/a&gt;题意&lt;/h2&gt;&lt;p&gt;n*m的棋盘，有多少种1x2骨牌的完美覆盖，满足棋盘上不会有完整的直线。&lt;/p&gt;
&lt;h2 id=&quot;做法&quot;&gt;&lt;a href=&quot;#做法&quot; class=&quot;headerlink&quot; title=&quot;做法&quot;&gt;&lt;/a&gt;做法&lt;/h2&gt;&lt;p&gt;插头dp，然后2^m容斥行，m^2容斥列。&lt;br&gt;
    
    </summary>
    
      <category term="2016暑期集训" scheme="http://luoxinchen.me/categories/2016%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
    
      <category term="ACM" scheme="http://luoxinchen.me/tags/ACM/"/>
    
      <category term="2016 暑期集训" scheme="http://luoxinchen.me/tags/2016-%E6%9A%91%E6%9C%9F%E9%9B%86%E8%AE%AD/"/>
    
      <category term="2016 多校" scheme="http://luoxinchen.me/tags/2016-%E5%A4%9A%E6%A0%A1/"/>
    
      <category term="插头dp" scheme="http://luoxinchen.me/tags/%E6%8F%92%E5%A4%B4dp/"/>
    
      <category term="容斥" scheme="http://luoxinchen.me/tags/%E5%AE%B9%E6%96%A5/"/>
    
  </entry>
  
</feed>
